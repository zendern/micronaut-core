ext {
    shadowJarEnabled = true
}
dependencies {
    for(proj in ['inject', 'http', 'aop']) {
        api project(":$proj")
    }
    compileOnly "com.oracle.substratevm:svm:$graalVersion"
    compileOnly project(":graal")
    compileOnly dependencyVersion("jcache")
    api dependencyVersion("validation")
    api dependencyVersion("jackson.databind")
    api dependencyVersion("rxjava2")

    compile([
        dependencyVersion('jackson.datatype'),
        dependencyModuleVersion('jackson.datatype', 'jackson-datatype-jsr310')
    ])

    compileOnly(
        dependencyModuleVersion('jackson.modules', 'jackson-module-kotlin')
    ) {
        transitive = false
    }
    compileOnly(
            dependencyVersion('jackson.modules')
    ) {
        transitive = false
    }
    compileOnly(
        dependencyModuleVersion('jackson.modules', 'jackson-module-parameter-names')
    ) {
        transitive = false
    }

    compileOnly 'org.glassfish:javax.el:3.0.1-b09'
    compileOnly dependencyVersion("reactor")
    compileOnly dependencyVersion("rxjava1.interop")
    compileOnly "com.github.ben-manes.caffeine:caffeine:$caffeineVersion"
    annotationProcessor project(":inject-java")

    testImplementation 'org.jsr107.ri:cache-ri-impl:1.1.0'
    testImplementation dependencyVersion("jcache")
    testImplementation dependencyVersion("rxjava1.interop")
    testImplementation dependencyVersion("reactor")
    testImplementation project(":inject-java")
    testAnnotationProcessor project(":inject-java")
    testImplementation project(":inject-java-test")
    testImplementation project(":inject-groovy")
    testImplementation dependencyModuleVersion("gorm", "grails-datastore-gorm")
    testImplementation files(org.gradle.internal.jvm.Jvm.current().toolsJar)
}


//compileTestGroovy.groovyOptions.forkOptions.jvmArgs = ['-Xdebug', '-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005']
